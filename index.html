<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡§Ö‡§Ç‡§ú‡§≤‡•Ä</title>

<style>
:root{
  --bg1:#fff3ea;--bg2:#ffe1cf;--accent:#8b2d2d;
  --soft:#b35c5c;--card:#ffffff;
}
*{box-sizing:border-box}
body{
  margin:0;min-height:100vh;
  font-family:system-ui,"Noto Sans Devanagari",sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  display:flex;align-items:center;justify-content:center;
}
.card{
  width:94%;max-width:440px;background:var(--card);
  border-radius:22px;padding:20px;
  box-shadow:0 14px 30px rgba(0,0,0,.12);
  text-align:center;
}
.title{font-size:26px;color:var(--accent)}
.subtitle{font-size:14px;color:#555;margin-bottom:12px}
.status{
  background:#fff7f4;border:1px solid #f3d4c7;
  border-radius:14px;padding:10px;font-size:13px;
  margin:8px 0;color:#6b2c2c;
}
.actions{
  display:flex;gap:10px;justify-content:center;
  flex-wrap:wrap;margin-top:12px;
}
.btn{
  border:none;border-radius:16px;
  padding:12px 16px;font-size:14px;cursor:pointer;
  background:linear-gradient(180deg,#c96a6a,#a13f3f);
  color:#fff;
}
.btn.secondary{
  background:#fff;color:var(--soft);
  border:1px dashed #e6b2b2;
}
.footer{font-size:11px;color:#777;margin-top:14px}
</style>
</head>

<body>
<main class="card">

<div class="title">‡§Ö‡§Ç‡§ú‡§≤‡•Ä</div>
<div class="subtitle">‡§∏‡•ç‡§®‡•á‡§π‡§™‡•Ç‡§∞‡•ç‡§£ ‚Ä¢ ‡§∏‡§Æ‡§ù‡§¶‡§æ‡§∞ ‚Ä¢ ‡§Æ‡§∞‡•ç‡§Ø‡§æ‡§¶‡§ø‡§§</div>

<div class="status" id="appStatus">‡§Ö‡§Ç‡§ú‡§≤‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à</div>

<div class="actions">
  <button class="btn" id="startBtn">‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
  <button class="btn" id="talkBtn">üí¨ ‡§¨‡§æ‡§§ ‡§ï‡§∞‡•á‡§Ç</button>
  <button class="btn" id="quizBtn">üß† Quiz</button>
  <button class="btn secondary" id="adminBtn">üîê Admin</button>
</div>

<div class="footer">Core-Stable ‚Ä¢ Voice-Enabled</div>

<!-- ================= CORE ================= -->
<script src="core/AmbiguityResolver.js"></script>
<script src="core/ThinkingEngine.js"></script>

<!-- üîë FINAL & ONLY CONCEPT SOURCE -->
<script src="learning/ConceptBridge.js"></script>

<script src="core/ContextMemory.js"></script>

<!-- ================= LEARNING ================= -->
<script src="learning/KnowledgeReader.js"></script>
<script src="learning/KnowledgeBase.js"></script>
<script src="learning/ExperienceMemory.js"></script>

<!-- ================= ANSWER ================= -->
<script src="answer/KnowledgeAnswerEngine.js"></script>
<script src="answer/ResponseEngine.js"></script>

<!-- ================= VOICE ================= -->
<script src="voice/tts.js"></script>
<script src="voice/commandBuffer.js"></script>
<script src="voice/stt.js"></script>

<!-- ================= MAIN ================= -->
<script src="main.js"></script>
  
  <script>
/* ===============================
   üîç THINKING ENGINE DIAGNOSTIC
   =============================== */

(function () {
  function runDiagnostic() {
    if (!window.ThinkingEngine) {
      alert("‚ùå ThinkingEngine ‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü");
      return;
    }

    try {
      // private memory ‡§§‡§ï ‡§∏‡•Ä‡§ß‡•á ‡§™‡§π‡•Å‡§Ç‡§ö ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à,
      // ‡§á‡§∏‡§≤‡§ø‡§è test-think ‡§∏‡•á ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§è‡§Ç‡§ó‡•á
      const test = ThinkingEngine.think("‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®");

      if (test && test.text) {
        alert(
          "‚úÖ ThinkingEngine ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§π‡•à\n" +
          "‡§â‡§§‡•ç‡§§‡§∞ ‡§Æ‡§ø‡§≤‡§æ: " + test.text
        );
      } else if (test && test.clarify) {
        alert(
          "‚ö†Ô∏è ThinkingEngine ambiguity ‡§Æ‡•ã‡§° ‡§Æ‡•á‡§Ç ‡§π‡•à\n" +
          "‡§≤‡•á‡§ï‡§ø‡§® concepts ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à‡§Ç"
        );
      } else {
        alert(
          "‚ùå ThinkingEngine ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§ï‡•ã‡§à concept ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à\n" +
          "(Admin ‚Üí Concept load ‡§µ‡§ø‡§´‡§≤)"
        );
      }
    } catch (e) {
      alert("‚ùå Diagnostic Error: " + e.message);
    }
  }

  // Page load ‡§ï‡•á 1 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§¨‡§æ‡§¶ ‡§ö‡§≤‡§æ‡§è‡§Ç
  setTimeout(runDiagnostic, 1000);
})();
  </script>

<script>
/* ================= NAV ================= */
adminBtn.onclick = () => location.href = "admin.html";
talkBtn.onclick  = () => location.href = "anjali_chat.html";

/* ================= TTS UNLOCK FIX ================= */
let TTS_UNLOCKED = false;

function unlockTTSOnce(callback){
  if (TTS_UNLOCKED) {
    callback && callback();
    return;
  }

  if (!window.AnjaliTTS) {
    callback && callback();
    return;
  }

  AnjaliTTS.speak("‡§Æ‡•à‡§Ç ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•Ç‡§Å", {}, () => {
    TTS_UNLOCKED = true;
    callback && callback();
  });
}

/* ================= START CONVERSATION ================= */
startBtn.onclick = () => {
  unlockTTSOnce(() => {
    appStatus.innerText = "üé§ ‡§∏‡•Å‡§® ‡§∞‡§π‡•Ä ‡§π‡•Ç‡§Å‚Ä¶";
    if (window.AnjaliSTT) {
      AnjaliSTT.startListening();
    }
  });
};

/* ================= QUIZ SAFE ================= */
quizBtn.onclick = () => {
  unlockTTSOnce(() => {
    alert("Quiz ‡§Æ‡•ã‡§° ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à");
  });
};
</script>

</main>
</body>
</html>
